<!DOCTYPE html>
<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="style.css" rel="stylesheet">

        <title>OpenADMS | Local Control Server</title>

        <style>
            .gr { color: #52c652; }
            .ye { color: #efa20b; }
            .bl { color: #3daed1; }
            .bk { color: #525252; }
            .re { color: #e62825; }
        </style>
    </head>

    <body>

        <main class="main">

            <h2>OpenADMS <small>Local Control Server</small></h2>

            <div class="breadcrumbs">
                <ol>
                    <li><a href="#project">Project</a></li>
                    <li><a href="#node">Sensor Node</a></li>
                    <li><a href="#system">System</a></li>
                    <li><a href="#statistics">Statistics</a></li>
                    <li><a href="#modules">Modules</a></li>
                    <li><a href="#sensors">Sensors</a></li>
                    <li><a href="#log">Log Messages</a></li>
                </ol>
            </div>

            <div class="row">
                <div class="full col-6">
                    <h4 id="project">Project</h4>
                    <div class="row">
                        <div class="full col-3"><strong>Name:</strong></div>
                        <div class="full col-9">$project_name</div>
                    </div>
                    <div class="row">
                        <div class="full col-3"><strong>ID:</strong></div>
                        <div class="full col-9"><code>$project_id</code></div>
                    </div>
                    <div class="row">
                        <div class="full col-3"><strong>Description:</strong></div>
                        <div class="full col-9">$project_description</div>
                    </div>
                </div>
                <div class="full col-6">
                    <h4 id="node">Sensor Node</h4>
                    <div class="row">
                        <div class="full col-3"><strong>Name:</strong></div>
                        <div class="full col-9">$node_name</div>
                    </div>
                    <div class="row">
                        <div class="full col-3"><strong>ID:</strong></div>
                        <div class="full col-9"><code>$node_id</code></div>
                    </div>
                    <div class="row">
                        <div class="full col-3"><strong>Description:</strong></div>
                        <div class="full col-9">$node_description</div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="full col-6">
                    <h4 id="system">System</h4>
                    <div class="row">
                        <div class="full col-3"><strong>Host Name:</strong></div>
                        <div class="full col-9">$hostname</div>
                    </div>
                    <div class="row">
                        <div class="full col-3"><strong>Operating System:</strong></div>
                        <div class="full col-9">$system</div>
                    </div>
                    <div class="row">
                        <div class="full col-3"><strong>Software Version:</strong></div>
                        <div class="full col-9">$openadms_string</div>
                    </div>
                    <div class="row">
                        <div class="full col-3"><strong>Python Interpreter:</strong></div>
                        <div class="full col-9">$python_version</div>
                    </div>
                    <div class="row">
                        <div class="full col-3"><strong>Root Directory:</strong></div>
                        <div class="full col-9"><code>$root_dir</code></div>
                    </div>
                    <div class="row">
                        <div class="full col-3"><strong>Configuration File:</strong></div>
                        <div class="full col-9"><code>$config_file</code></div>
                    </div>
                    <div class="row">
                        <div class="full col-3"><strong>Local Date &amp; Time:</strong></div>
                        <div class="full col-9">$datetime</div>
                    </div>
                </div>
                <div class="full col-6">
                    <h4 id="statistics">Statistics</h4>
                    <div class="row">
                        <div class="full col-3"><strong>System Uptime:</strong></div>
                        <div class="full col-9">$system_uptime</div>
                    </div>
                    <div class="row">
                        <div class="full col-3"><strong>Software Uptime:</strong></div>
                        <div class="full col-9">$software_uptime</div>
                    </div>
                </div>
            </div>
<!--
            <div class="row">
                <div class="full col-2"><strong>CPU Load:</strong></div>
                <div class="full col-3"><div class="progress"><div class="progress-bar info" style="width: $cpu_load%"><span class="progress-text">$cpu_load%</span></div></div></div>
            </div>
            <div class="row">
                <div class="full col-2"><strong>Memory Used:</strong></div>
                <div class="full col-3"><div class="progress"><div class="progress-bar info" style="width: $mem_used%"><span class="progress-text">$mem_used%</span></div></div></div>
            </div>
//-->
            <h4 id="modules">Modules</h4>
            <table class="table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
$modules_table
                </tbody>
            </table>

            <h4 id="sensors">Sensors</h4>
            <table class="table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
$sensors_table
                </tbody>
            </table>

            <h4 id="log">Log Messages</h4>
            <p>Last $log_size log messages:</p>
            <code id="console" style="background-color: #fcfcfc; color: #525252; font-family: monospace; height: 25em; overflow: scroll; white-space: pre; width: 100%;">$log</code>

            <hr>

            <footer style="text-align: center;">
                <small><a href="https://www.dabamos.de/">$openadms_string</a><br>
                Copyright &copy; $year Hochschule Neubrandenburg â€“ University of Applied Sciences<br>
                European Union Public Licence (EUPL) v.1.1</small>
            </footer>

        </main>

    </body>

    <script type="text/javascript">
    <!--
        var elements = document.getElementsByClassName('confirm');

        var confirmIt = function (e) {
            if (!confirm('Are you sure to start or stop this module?'))
                e.preventDefault();
        };

        for (var i = 0, l = elements.length; i < l; i++) {
            elements[i].addEventListener('click', confirmIt, false);
        }

        document.addEventListener("DOMContentLoaded", function(event) {
            var console = document.getElementById('console');
            console.innerHTML = console.innerHTML.replace(
                /(.*) - (.*) - (.*) - (.*)/g,
                function(a, b, c, d, e) {
                    var color = 'bk';

                    if (c.trim() == 'WARNING' || c.trim() == 'ERROR' || c.trim() == 'CRITICAL')
                        color = 're';

                    return '<span class="gr">' + b + '</span> - <span class="ye">' + c + '</span> - <span class="bl">' + d + '</span> - <span class="' + color + '">' + e + '</span>';
                }
            );
        });
    //-->
    </script>

</html>

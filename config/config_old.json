{
    "Modules":
    {
        "FileExporter": "modules.export.FileExporter",
        "PreProcessor": "modules.processing.PreProcessor",
        "PolarTransformer": "modules.processing.PolarTransformer",
        "AtmosphericCorrector": "modules.processing.AtmosphericCorrector",
        "USB0": "modules.port.SerialPort",
        "USB1": "modules.port.SerialPort"
    },
    "Project":
    {
        "Name": "Development Project 1",
        "Meta": "Project for testing only."
    },
    "Ports":
    {
       "Serial":
       {
           "USB0":
            {
                "Port": "/dev/ttyU0",
                "BaudRate": 115200,
                "ByteSize": 8,
                "StopBits": 1,
                "Parity": "none",
                "Timeout": 2.0,
                "SoftwareFlowControl": false,
                "HardwareFlowControl": false
            },
            "USB1":
            {
                "Port": "/dev/ttyU1",
                "BaudRate": 9600,
                "ByteSize": 8,
                "StopBits": 1,
                "Parity": "none",
                "Timeout": 2.0,
                "SoftwareFlowControl": false,
                "HardwareFlowControl": false
            }
        }
    },
    "Sensors":
    {
        "Leica_TM30":
        {
            "Description": "Leica TM30 totalstation",
            "Type": "Totalstation",
            "Observations": {
                   "Init":
                    [
                        {
                            "Name": "get_sensor_id",
                            "Description": "Get instrument identification code.",
                            "Receivers": ["PreProcessor"],
                            "Enabled": true,
                            "Onetime": true,
                            "AwaitTime": 1.0,
                            "SleepTime": 1.0,
                                    "ID": null,
                                    "Request": "%R1Q,5003:\r\n",
                                    "ResponsePattern": "R1P,0,0:0,(\\d+)",
                                    "ResponseDelimiter": "\r",
                                    "ResponseDescriptions": "SensorID",
                                    "ResponseTypes": "String",
                                    "ResponseUnits": "none"
                        },
                        {
                            "Name": "get_sensor_name",
                            "Description": "Get instrument name.",
                            "Receivers": ["PreProcessor"],
                            "Enabled": true,
                            "Onetime": true,
                            "AwaitTime": 1.0,
                            "SleepTime": 1.0,
                                    "ID": null,
                                    "Request": "%R1Q,5004:\r\n",
                                    "ResponsePattern": "R1P,0,0:0,\"([\\w\\d\\s\\.]+)",
                                    "ResponseDelimiter": "\r",
                                    "ResponseDescriptions": "SensorName",
                                    "ResponseTypes": "String",
                                    "ResponseUnits": "none"
                        }
                    ],
        "P1": [
            {
                "AwaitTime": 0.5,
                "Description": "Set the horizontal and vertical direction.",
                "Enabled": true,
                "Name": "set_direction",
                "Onetime": false,
                        "ID": null,
                        "Request": "%R1Q,9027:0.0,1.59113,2,1,0\r\n",
                        "ResponseDelimiter": "\r",
                        "ResponseDescriptions": "none",
                        "ResponsePattern": "(%.*0)",
                        "ResponseTypes": "String",
                        "ResponseUnits": "none",
                "Receivers": [
                    "PreProcessor"
                ],
                "SleepTime": 3.0
            },
            {
                "AwaitTime": 2.0,
                "Description": "Get the distance.",
                "Enabled": true,
                "Name": "get_distance",
                "Onetime": false,
                        "ID": null,
                        "Request": "%R1Q,2008:1,1\r\n",
                        "ResponseDelimiter": "\r",
                        "ResponseDescriptions": "none",
                        "ResponsePattern": "(%.*0)",
                        "ResponseTypes": [
                            "String"
                        ],
                        "ResponseUnits": [
                            "none"
                        ],
                "Receivers": [
                    "PreProcessor"
                ],
                "SleepTime": 2.0
            },
            {
                "AwaitTime": 0.5,
                "Description": "Get a complete measurement.",
                "Enabled": true,
                "Name": "get_full_measurement",
                "Onetime": false,
                        "ID": "P1",
                        "Request": "%R1Q,2167:5000,1\r\n",
                        "ResponseDelimiter": "\r",
                        "ResponseDescriptions": [
                            "ReturnCode",
                            "Hz",
                            "V",
                            "AccAngle",
                            "C",
                            "L",
                            "AccIncl",
                            "SlopeDist",
                            "DistTime"
                        ],
                        "ResponsePattern": "%R1P,0,0:([0-9]+),(-?[0-9]*\\.?[0-9]+),(-?[0-9]*\\.?[0-9]+),(-?[0-9]*\\.?[0-9]+),(-?[0-9]*\\.?[0-9]*),(-?[0-9]*\\.?[0-9]*),(-?[0-9]*\\.?[0-9]*),([0-9]*\\.?[0-9]*),([0-9]*)",
                        "ResponseTypes": [
                            "Integer",
                            "Float",
                            "Float",
                            "Float",
                            "Float",
                            "Float",
                            "Float",
                            "Float",
                            "Integer"
                        ],
                        "ResponseUnits": [
                            "none",
                            "rad",
                            "rad",
                            "rad",
                            "rad",
                            "rad",
                            "rad",
                            "m",
                            "ns"
                        ],
                "Receivers": [
                    "PreProcessor",
                    "AtmosphericCorrector",
                    "PolarTransformer",
                    "FileExporter"
                ],
                "SleepTime": 10.0
            }
        ],
        "P2": [
            {
                "AwaitTime": 0.5,
                "Description": "Set the horizontal and vertical direction.",
                "Enabled": true,
                "Name": "set_direction",
                "Onetime": false,
                        "ID": null,
                        "Request": "%R1Q,9027:0.38098,1.58264,2,1,0\r\n",
                        "ResponseDelimiter": "\r",
                        "ResponseDescriptions": "none",
                        "ResponsePattern": "(%.*0)",
                        "ResponseTypes": "String",
                        "ResponseUnits": "none",
                "Receivers": [
                    "PreProcessor"
                ],
                "SleepTime": 3.0
            },
            {
                "AwaitTime": 2.0,
                "Description": "Get the distance.",
                "Enabled": true,
                "Name": "get_distance",
                "Onetime": false,
                        "ID": null,
                        "Request": "%R1Q,2008:1,1\r\n",
                        "ResponseDelimiter": "\r",
                        "ResponseDescriptions": "none",
                        "ResponsePattern": "(%.*0)",
                        "ResponseTypes": [
                            "String"
                        ],
                        "ResponseUnits": [
                            "none"
                        ],
                "Receivers": [
                    "PreProcessor"
                ],
                "SleepTime": 2.0
            },
            {
                "AwaitTime": 0.5,
                "Description": "Get a complete measurement.",
                "Enabled": true,
                "Name": "get_full_measurement",
                "Onetime": false,
                        "ID": "P2",
                        "Request": "%R1Q,2167:5000,1\r\n",
                        "ResponseDelimiter": "\r",
                        "ResponseDescriptions": [
                            "ReturnCode",
                            "Hz",
                            "V",
                            "AccAngle",
                            "C",
                            "L",
                            "AccIncl",
                            "SlopeDist",
                            "DistTime"
                        ],
                        "ResponsePattern": "%R1P,0,0:([0-9]+),(-?[0-9]*\\.?[0-9]+),(-?[0-9]*\\.?[0-9]+),(-?[0-9]*\\.?[0-9]+),(-?[0-9]*\\.?[0-9]*),(-?[0-9]*\\.?[0-9]*),(-?[0-9]*\\.?[0-9]*),([0-9]*\\.?[0-9]*),([0-9]*)",
                        "ResponseTypes": [
                            "Integer",
                            "Float",
                            "Float",
                            "Float",
                            "Float",
                            "Float",
                            "Float",
                            "Float",
                            "Integer"
                        ],
                        "ResponseUnits": [
                            "none",
                            "rad",
                            "rad",
                            "rad",
                            "rad",
                            "rad",
                            "rad",
                            "m",
                            "ns"
                        ],
                "Receivers": [
                    "PreProcessor",
                    "AtmosphericCorrector",
                    "PolarTransformer",
                    "FileExporter"
                ],
                "SleepTime": 10.0
            }
        ],
        "P3": [
            {
                "AwaitTime": 0.5,
                "Description": "Set the horizontal and vertical direction.",
                "Enabled": true,
                "Name": "set_direction",
                "Onetime": false,
                        "ID": null,
                        "Request": "%R1Q,9027:0.9728,1.59095,2,1,0\r\n",
                        "ResponseDelimiter": "\r",
                        "ResponseDescriptions": "none",
                        "ResponsePattern": "(%.*0)",
                        "ResponseTypes": "String",
                        "ResponseUnits": "none",
                "Receivers": [
                    "PreProcessor"
                ],
                "SleepTime": 3.0
            },
            {
                "AwaitTime": 2.0,
                "Description": "Get the distance.",
                "Enabled": true,
                "Name": "get_distance",
                "Onetime": false,
                        "ID": null,
                        "Request": "%R1Q,2008:1,1\r\n",
                        "ResponseDelimiter": "\r",
                        "ResponseDescriptions": "none",
                        "ResponsePattern": "(%.*0)",
                        "ResponseTypes": [
                            "String"
                        ],
                        "ResponseUnits": [
                            "none"
                        ],
                "Receivers": [
                    "PreProcessor"
                ],
                "SleepTime": 2.0
            },
            {
                "AwaitTime": 0.5,
                "Description": "Get a complete measurement.",
                "Enabled": true,
                "Name": "get_full_measurement",
                "Onetime": false,
                        "ID": "P3",
                        "Request": "%R1Q,2167:5000,1\r\n",
                        "ResponseDelimiter": "\r",
                        "ResponseDescriptions": [
                            "ReturnCode",
                            "Hz",
                            "V",
                            "AccAngle",
                            "C",
                            "L",
                            "AccIncl",
                            "SlopeDist",
                            "DistTime"
                        ],
                        "ResponsePattern": "%R1P,0,0:([0-9]+),(-?[0-9]*\\.?[0-9]+),(-?[0-9]*\\.?[0-9]+),(-?[0-9]*\\.?[0-9]+),(-?[0-9]*\\.?[0-9]*),(-?[0-9]*\\.?[0-9]*),(-?[0-9]*\\.?[0-9]*),([0-9]*\\.?[0-9]*),([0-9]*)",
                        "ResponseTypes": [
                            "Integer",
                            "Float",
                            "Float",
                            "Float",
                            "Float",
                            "Float",
                            "Float",
                            "Float",
                            "Integer"
                        ],
                        "ResponseUnits": [
                            "none",
                            "rad",
                            "rad",
                            "rad",
                            "rad",
                            "rad",
                            "rad",
                            "m",
                            "ns"
                        ],
                "Receivers": [
                    "PreProcessor",
                    "AtmosphericCorrector",
                    "PolarTransformer",
                    "FileExporter"
                ],
                "SleepTime": 10.0
            }
        ],
        "P4": [
            {
                "AwaitTime": 0.5,
                "Description": "Set the horizontal and vertical direction.",
                "Enabled": true,
                "Name": "set_direction",
                "Onetime": false,
                        "ID": null,
                        "Request": "%R1Q,9027:2.16693,1.59124,2,1,0\r\n",
                        "ResponseDelimiter": "\r",
                        "ResponseDescriptions": "none",
                        "ResponsePattern": "(%.*0)",
                        "ResponseTypes": "String",
                        "ResponseUnits": "none",
                "Receivers": [
                    "PreProcessor"
                ],
                "SleepTime": 3.0
            },
            {
                "AwaitTime": 2.0,
                "Description": "Get the distance.",
                "Enabled": true,
                "Name": "get_distance",
                "Onetime": false,
                        "ID": null,
                        "Request": "%R1Q,2008:1,1\r\n",
                        "ResponseDelimiter": "\r",
                        "ResponseDescriptions": "none",
                        "ResponsePattern": "(%.*0)",
                        "ResponseTypes": [
                            "String"
                        ],
                        "ResponseUnits": [
                            "none"
                        ],
                "Receivers": [
                    "PreProcessor"
                ],
                "SleepTime": 2.0
            },
            {
                "AwaitTime": 0.5,
                "Description": "Get a complete measurement.",
                "Enabled": true,
                "Name": "get_full_measurement",
                "Onetime": false,
                        "ID": "P4",
                        "Request": "%R1Q,2167:5000,1\r\n",
                        "ResponseDelimiter": "\r",
                        "ResponseDescriptions": [
                            "ReturnCode",
                            "Hz",
                            "V",
                            "AccAngle",
                            "C",
                            "L",
                            "AccIncl",
                            "SlopeDist",
                            "DistTime"
                        ],
                        "ResponsePattern": "%R1P,0,0:([0-9]+),(-?[0-9]*\\.?[0-9]+),(-?[0-9]*\\.?[0-9]+),(-?[0-9]*\\.?[0-9]+),(-?[0-9]*\\.?[0-9]*),(-?[0-9]*\\.?[0-9]*),(-?[0-9]*\\.?[0-9]*),([0-9]*\\.?[0-9]*),([0-9]*)",
                        "ResponseTypes": [
                            "Integer",
                            "Float",
                            "Float",
                            "Float",
                            "Float",
                            "Float",
                            "Float",
                            "Float",
                            "Integer"
                        ],
                        "ResponseUnits": [
                            "none",
                            "rad",
                            "rad",
                            "rad",
                            "rad",
                            "rad",
                            "rad",
                            "m",
                            "ns"
                        ],
                "Receivers": [
                    "PreProcessor",
                    "AtmosphericCorrector",
                    "PolarTransformer",
                    "FileExporter"
                ],
                "SleepTime": 10.0
            }
        ]
    }
        },
        "STS_DTM":
        {
            "Description": "STS DTM meteorology sensor",
            "Type": "Meteorology",
            "Observations":
            {
                "Init":
                [
                    {
                        "Name": "power_on",
                        "Description": "power on.",
                        "Receivers": [],
                        "Enabled": true,
                        "Onetime": true,
                        "AwaitTime": 0.8,
                        "SleepTime": 1.0,
                        "ID": null,
                        "Request": "A\r",
                        "ResponsePattern": "(#)",
                        "ResponseDelimiter": "\r",
                        "ResponseDescriptions": ["PowerOn"],
                        "ResponseTypes": ["String"],
                        "ResponseUnits": ["none"]
                    },
                    {
                        "Name": "set_cmd",
                        "Description": "change command set.",
                        "Receivers": [],
                        "Enabled": true,
                        "Onetime": true,
                        "AwaitTime": 0.8,
                        "SleepTime": 1.0,
                        "ID": null,
                        "Request": "CMDT 1\r",
                        "ResponsePattern": "(\\*)",
                        "ResponseDelimiter": "\r",
                        "ResponseDescriptions": ["SetCmd"],
                        "ResponseTypes": ["String"],
                        "ResponseUnits": ["none"]
                    },
                    {
                        "Name": "save",
                        "Description": "save).",
                        "Receivers": [],
                        "Enabled": true,
                        "Onetime": true,
                        "AwaitTime": 0.8,
                        "SleepTime": 1.0,
                        "ID": null,
                        "Request": "SAVE\r",
                        "ResponsePattern": "(\\*)",
                        "ResponseDelimiter": "\r",
                        "ResponseDescriptions": ["Save"],
                        "ResponseTypes": ["String"],
                        "ResponseUnits": ["none"]
                    }
                ],
                "Main":
                [
                    {
                        "Name": "get_values",
                        "Description": "Get temperature and air pressure values.",
                        "Receivers": ["PreProcessor", "FileExporter"],
                        "Enabled": true,
                        "Onetime": false,
                        "AwaitTime": 0.8,
                        "SleepTime": 10.0,
                        "ID": "T1",
                        "Request": "TEMP ?\r",
                        "ResponsePattern": "([+-]?\\d+\\.+\\d)",
                        "ResponseDelimiter": "\r",
                        "ResponseDescriptions": ["Temperature"],
                        "ResponseTypes": ["Float"],
                        "ResponseUnits": ["°C"]
                    },
                    {
                        "Name": "get_pressure",
                        "Description": "Get air pressure value.",
                        "Receivers": ["PreProcessor", "FileExporter"],
                        "Enabled": true,
                        "Onetime": false,
                        "AwaitTime": 0.8,
                        "SleepTime": 10.0,
                        "ID": "P1",
                        "Request": "PRES ?\r",
                        "ResponsePattern": "([+-]?\\d+\\.+\\d)",
                        "ResponseDelimiter": "\r",
                        "ResponseDescriptions": ["Pressure"],
                        "ResponseTypes": ["Float"],
                        "ResponseUnits": ["mbar"]
                    }
                ]
            }
        },
        "DFT_485":
        {
            "Description": "DFT 485 meteorology sensor",
            "Type": "Weather Station",
            "Observations":
            {
                "Main":
                [
                    {
                        "Name": "get_values",
                        "Description": "Get temperature, air pressure, and humidity values.",
                        "Receivers": ["PreProcessor", "AtmosphericCorrector", "FileExporter"],
                        "Enabled": true,
                        "Onetime": false,
                        "AwaitTime": 0.8,
                        "SleepTime": 5.0,
                        "ID": "Meteo",
                        "Request": "?U\r\n",
                        "ResponsePattern": "TD([\\d\\.]+), TE([\\d\\.]+), DR([\\d\\.]+), FE([\\d\\.]+),",
                        "ResponseDelimiter": ", \r\n",
                        "ResponseDescriptions": ["TempPress", "Temperature", "Pressure", "Humidity"],
                        "ResponseTypes": ["Float", "Float", "Float", "Float"],
                        "ResponseUnits": ["°C", "°C", "hPa", "%"]
                    }
                ]
            }
        }
    },
    "Connections":
    {
        "USB0": "Leica_TM30",
        "USB1": "DFT_485"
    },
    "Scheduler":
    {
        "USB0":
        [
            {
                "Enabled": true,
                "StartDate": "2016-02-01",
                "EndDate": "2016-07-30",
                "Schedule":
                {
                    "Monday":
                    [
                        {
                            "StartTime": "00:00:00",
                            "EndTime": "23:59:59"
                        }
                    ],
                    "Tuesday": [],
                    "Wednesday": [],
                    "Thursday": [],
                    "Friday": [],
                    "Saturday": [],
                    "Sunday": []
                },
                "ObservationSets": ["Init", "P1", "P2", "P3", "P4"]
            }
        ],
         "USB1":
        [
            {
                "Enabled": true,
                "StartDate": "2016-02-01",
                "EndDate": "2016-07-30",
                "Schedule": {},
                "ObservationSets": ["Main"]
            }
        ]
    },
    "AtmosphericCorrector":
    {
        "Temperature": null,
        "Pressure": null,
        "Humidity": 0.6
    },
    "PolarTransformer":
    {
        "USB0":
        {
            "SensorPosition":
            {
                "East": 1000.0000,
                "North": 2000.0000,
                "Height": 100.0000
            },
            "AzimuthPosition":
            {
                "East": 1007.4995,
                "North": 2000.0000
            }
        }
    },
    "FileExporter":
    {
        "FileExtension": ".csv",
        "FileName": "{port}_{id}_{date}",
        "FileRotation": "monthly",
        "Paths": ["./data"],
        "Separator": ",",
        "DateTimeFormat": "%Y-%m-%dT%H:%M:%S.%f"
    },
    "TinyDB":
    {
        "FileExtension": ".json",
        "Path": "./"
    }
}
